'use client'

import {
  LayoutGrid,
  Lock,
  Award,
  GraduationCap,
  BarChart3,
  Info,
  LifeBuoy,
  LogOut,
  ChevronLeft,
  ChevronRight,
} from 'lucide-react'
import Link from 'next/link'
import { usePathname, useRouter } from 'next/navigation'
import { useAuth } from '@/contexts/auth-context'
import {
  Sidebar,
  SidebarContent,
  SidebarFooter,
  SidebarGroup,
  SidebarGroupContent,
  SidebarGroupLabel,
  SidebarHeader,
  SidebarMenu,
  SidebarMenuButton,
  SidebarMenuItem,
  SidebarSeparator,
  useSidebar,
} from '@/components/ui/sidebar'

interface NavItem {
  label: string
  href: string
  icon: React.ElementType
}

// Role-specific navigation items
const teacherNavItems: NavItem[] = [
  { label: 'Dashboard', href: '/teacher', icon: LayoutGrid },
  { label: 'Students', href: '/teacher/students', icon: Lock },
  { label: 'Award Auras', href: '/teacher/award', icon: Award },
  { label: 'My Classes', href: '/teacher/classes', icon: GraduationCap },
  { label: 'Analytics', href: '/teacher/analytics', icon: BarChart3 },
]

const studentNavItems: NavItem[] = [
  { label: 'My Collection', href: '/student', icon: Award },
  { label: 'Dashboard', href: '/student/dashboard', icon: LayoutGrid },
  { label: 'Achievements', href: '/student/achievements', icon: BarChart3 },
]

const parentNavItems: NavItem[] = [
  { label: 'Dashboard', href: '/parent', icon: LayoutGrid },
  { label: 'Children', href: '/parent/children', icon: Lock },
  { label: 'Achievements', href: '/parent/achievements', icon: Award },
]

const adminNavItems: NavItem[] = [
  { label: 'Dashboard', href: '/admin', icon: LayoutGrid },
  { label: 'NFT Collection', href: '/admin/collection', icon: Award },
  { label: 'Schools', href: '/admin/schools', icon: GraduationCap },
  { label: 'Teachers', href: '/admin/teachers', icon: Lock },
  { label: 'Students', href: '/admin/students', icon: Lock },
  { label: 'Aura Types', href: '/admin/auras', icon: Award },
  { label: 'Analytics', href: '/admin/analytics', icon: BarChart3 },
]

const footerItems: NavItem[] = [
  { label: 'About us', href: '/about', icon: Info },
  { label: 'Support', href: '/support', icon: LifeBuoy },
]

export function AppSidebar() {
  const { userProfile, logout } = useAuth()
  const pathname = usePathname()
  const router = useRouter()
  const { state, toggleSidebar } = useSidebar()

  // Get navigation items based on role
  const getNavItems = () => {
    if (!userProfile) return []
    switch (userProfile.role) {
      case 'teacher':
        return teacherNavItems
      case 'student':
        return studentNavItems
      case 'parent':
        return parentNavItems
      case 'admin':
        return adminNavItems
      default:
        return []
    }
  }

  const navItems = getNavItems()

  const handleLogout = async () => {
    await logout()
    router.push('/login')
  }

  return (
    <Sidebar collapsible="icon" className="border-none">
      {/* Header with Logo */}
      <SidebarHeader className={`flex items-start justify-center h-26 ${state === 'expanded' ? 'ml-4' : ''}`}>
        <Link href="/" className="flex items-start gap-2">
          <span className={`${state == 'expanded' ? 'hidden' : 'flex self-start'}`}>
            <svg width="33" height="33" viewBox="0 0 33 33" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M8.18062 10.0193L8.29206 10.1233L8.33472 9.97765C8.39741 9.76607 8.47489 9.49638 8.55064 9.22322L8.39044 9.13477L8.30773 9.22235C8.23982 9.29432 8.08224 9.46256 7.99518 9.58136C7.93945 9.65767 7.94294 9.76173 8.00301 9.83544C8.05002 9.8918 8.11097 9.95511 8.17975 10.0193H8.18062Z"
                fill="white"
              />
              <path
                d="M10.1307 11.9695L10.6949 12.5315C10.9108 12.7457 11.1406 12.9746 11.3792 13.2157L18.0386 19.8747C18.083 19.9189 18.1414 19.9432 18.2032 19.9432C18.3207 19.9432 18.4165 19.8591 18.4322 19.7446C18.7212 17.5775 19.2027 12.0476 19.5884 7.60421L19.6824 6.51331C19.9122 3.8511 20.1107 1.55137 20.2439 0.253214C20.2509 0.187309 20.23 0.124873 20.1865 0.0763114C20.1421 0.0277499 20.0794 0 20.0141 0C19.9653 0 19.9183 0.0156092 19.8783 0.0442258C18.4713 1.06835 16.6291 2.48011 14.8469 3.8459L14.3071 4.25954C13.218 5.09376 11.9825 6.03984 11.0666 6.72057C10.9143 6.84717 10.7454 6.96944 10.5617 7.10299C10.102 7.43858 9.66841 7.75597 9.52563 8.17394C9.227 9.00469 9.04243 9.8207 9.00586 10.4754V10.5058C9.00847 10.7191 9.08247 10.8943 9.24789 11.0738C9.46033 11.3018 9.80074 11.6418 10.1298 11.9704L10.1307 11.9695Z"
                fill="white"
              />
              <path
                d="M19.5318 14.5703C19.3367 16.8162 19.153 18.9165 19.0486 19.9268C19.0425 19.9823 19.0599 20.036 19.0973 20.0768C19.1339 20.1176 19.187 20.141 19.2418 20.141C19.2758 20.141 19.3097 20.1314 19.3402 20.1141C20.2587 19.5843 21.3131 18.9469 22.2429 18.385L22.4971 18.2315L22.5946 18.1708L23.1057 17.8621C23.5706 17.5811 24.0251 17.3071 24.4595 17.0495C25.351 16.5405 25.6383 16.1997 26.1781 15.4253C26.3975 15.1183 27.007 14.2607 27.4049 13.7014L27.7688 13.1897C27.9089 12.9894 28.0639 12.7735 28.2206 12.555L28.2441 12.5186C28.5933 12.0321 28.9859 11.4806 29.2497 11.0747C29.4874 10.727 29.4839 10.5596 29.234 10.2622C28.763 9.68898 27.8515 8.52871 26.886 7.29993L26.6378 6.98428C24.8974 4.76779 22.7313 2.00932 21.2338 0.215151C21.1964 0.170058 21.1416 0.144043 21.0832 0.144043C20.984 0.144043 20.9004 0.217753 20.8882 0.315743C20.4616 3.88415 19.9061 10.2717 19.5379 14.4983L19.5318 14.5711V14.5703Z"
                fill="white"
              />
              <path
                d="M17.862 20.6985C17.8795 20.6352 17.8629 20.5693 17.8176 20.5216C16.5282 19.1662 14.8497 17.496 13.2259 15.8814L13.1615 15.8189C12.068 14.7324 10.9371 13.6085 10.0003 12.6503C9.60413 12.2557 9.23934 11.8906 8.92156 11.568L8.68562 11.3313C8.27816 10.922 7.96561 10.6081 7.76449 10.4147C7.72967 10.3809 7.68352 10.3618 7.63477 10.3618C7.56512 10.3618 7.50156 10.4008 7.46935 10.4624C7.29435 10.7963 7.0114 11.3643 6.78503 11.8221L6.47248 12.45C6.31751 12.7613 6.15035 13.096 5.97187 13.4498L3.34866 18.6971C2.18811 21.0176 0.982292 23.4309 0.0193759 25.3717C-0.00935487 25.4298 -0.00587248 25.4965 0.028082 25.5512C0.0629072 25.6067 0.122981 25.6396 0.188278 25.6396C0.20569 25.6396 0.222232 25.637 0.239645 25.6327L17.7323 20.8286C17.7976 20.8103 17.8464 20.7618 17.8647 20.6976L17.862 20.6985Z"
                fill="white"
              />
              <path
                d="M27.1976 14.9544C27.1514 15.0203 27.1454 15.101 27.1819 15.1712C27.2185 15.2414 27.2925 15.2865 27.3691 15.2865C27.4065 15.2865 27.444 15.2761 27.4779 15.2562C28.0943 14.8894 29.2749 14.1792 30.2474 13.5374C30.7454 13.1984 30.4799 12.6052 30.223 12.0329L30.2021 11.9861C30.1159 11.8031 30.0376 11.6557 29.9697 11.5499C29.9305 11.4883 29.8635 11.4519 29.7903 11.4519C29.7268 11.4519 29.6676 11.4805 29.6275 11.5291C29.5039 11.68 29.3428 11.9072 29.2531 12.0355L27.1976 14.9544Z"
                fill="white"
              />
              <path
                d="M24.0018 26.1209L23.8887 26.0247C21.6894 24.1369 19.613 22.354 18.8007 21.6238C18.7485 21.5761 18.7032 21.5388 18.651 21.5145L18.5787 21.4807L18.5334 21.5466C18.516 21.5726 18.4942 21.6082 18.4699 21.6567C18.2661 22.0582 17.8517 23.0711 17.6393 23.8056C17.2989 24.893 17.8979 26.0516 18.5325 27.0471L18.5526 27.074C18.7145 27.2986 18.9374 27.4217 19.2447 27.5474C19.5869 27.6905 20.0762 27.8926 20.6891 28.1449L26.6512 30.6025C27.4478 30.9268 28.2775 31.2711 28.9479 31.5503L29.2012 31.6552C29.6592 31.8451 30.1041 32.0307 30.5385 32.2093C30.5603 32.218 30.582 32.2223 30.6047 32.2223C30.6735 32.2223 30.737 32.1781 30.7623 32.1122C30.7875 32.0472 30.7692 31.9743 30.7161 31.9275C29.0732 30.4776 26.3787 28.164 24.001 26.1227L24.0018 26.1209Z"
                fill="white"
              />
              <path
                d="M32.9189 30.6797C32.6821 28.9644 32.3304 26.3187 32.0204 23.9843L32.0056 23.8741C31.4659 19.8167 30.9078 15.6213 30.6684 14.0335L30.6492 13.9043L30.4977 13.9823C30.1721 14.1714 29.5444 14.5547 28.8174 14.9987C28.3446 15.2874 27.8083 15.6144 27.232 15.9638C25.1982 17.1995 22.5611 18.8073 20.4655 20.0846L19.2083 20.8564C19.1465 20.8937 19.1073 20.957 19.1012 21.0281C19.0942 21.0983 19.1212 21.166 19.1734 21.2137C19.4311 21.4452 19.8412 21.8025 20.3331 22.23L20.3662 22.2586C20.7937 22.6298 21.2943 23.0659 21.8445 23.549L32.5271 32.8736C32.5533 32.8962 32.5846 32.9075 32.6186 32.9075C32.6804 32.9075 32.7344 32.8684 32.7535 32.8086C32.9337 32.2354 32.9895 31.5235 32.9198 30.6797H32.9189Z"
                fill="white"
              />
              <path
                d="M17.204 25.6292L17.1056 25.428L17.0308 25.6387C17.002 25.7202 16.9663 25.8217 16.9463 25.8529L16.9402 25.8633L16.9367 25.8746C16.9019 25.9847 16.8488 26.1087 16.7896 26.2457C16.753 26.3307 16.6964 26.4608 16.6555 26.5744C16.6355 26.6299 16.6399 26.6914 16.6668 26.7435C16.6947 26.7955 16.7435 26.8337 16.8009 26.8484C16.9341 26.8822 17.0978 26.9108 17.2066 26.929C17.3242 26.949 17.4696 26.9733 17.5662 27.001C17.6141 27.0071 17.6611 27.0158 17.7064 27.0253L17.8901 27.0635L17.8109 26.8944C17.6437 26.538 17.3912 26.0098 17.204 25.6274V25.6292Z"
                fill="white"
              />
              <path
                d="M17.7993 22.2604C17.8533 22.1181 17.9229 21.9352 17.9839 21.7661C18.0074 21.7002 17.9978 21.6308 17.9578 21.5744C17.9186 21.5189 17.8542 21.4851 17.7871 21.4851C17.7671 21.4851 17.7479 21.4877 17.7288 21.4929C16.8199 21.7496 15.0821 22.2265 13.0561 22.7824L12.3509 22.9758C9.20968 23.8377 5.30056 24.9113 2.47711 25.7004C2.37525 25.729 2.31256 25.8218 2.32475 25.9259C2.33694 26.0308 2.41878 26.1071 2.52412 26.1123C5.37195 26.2519 9.07909 26.408 11.7859 26.5208L12.0236 26.5303C13.7918 26.604 15.0908 26.6586 15.6994 26.689H15.7063C16.0859 26.689 16.1521 26.5147 16.3314 26.049C16.3776 25.9285 16.4307 25.7923 16.4908 25.6614C16.7781 24.92 17.223 23.7623 17.5747 22.8448L17.8002 22.2586L17.7993 22.2604Z"
                fill="white"
              />
            </svg>
          </span>

          {state === 'expanded' && (
            <span>
              <svg width="135" height="33" viewBox="0 0 135 33" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M8.11622 9.94038L8.22679 10.0436L8.26911 9.89909C8.3313 9.68916 8.40818 9.4216 8.48333 9.15059L8.32439 9.06284L8.24234 9.14973C8.17496 9.22114 8.01862 9.38804 7.93224 9.50591C7.87696 9.58162 7.88041 9.68486 7.94001 9.75799C7.98666 9.81391 8.04712 9.87672 8.11536 9.94038H8.11622Z"
                  fill="white"
                />
                <path
                  d="M10.0511 11.8753L10.6108 12.4328C10.825 12.6453 11.053 12.8724 11.2897 13.1116L17.8967 19.7182C17.9408 19.762 17.9986 19.7861 18.06 19.7861C18.1766 19.7861 18.2716 19.7027 18.2871 19.5891C18.5739 17.4391 19.0516 11.9527 19.4342 7.54433L19.5275 6.46202C19.7555 3.82077 19.9525 1.53915 20.0846 0.25122C20.0915 0.185834 20.0708 0.12389 20.0276 0.0757104C19.9836 0.0275313 19.9214 0 19.8566 0C19.8082 0 19.7616 0.0154863 19.7219 0.0438776C18.326 1.05994 16.4983 2.46058 14.7301 3.81561L14.1946 4.226C13.114 5.05364 11.8883 5.99228 10.9796 6.66764C10.8284 6.79325 10.6609 6.91456 10.4786 7.04705C10.0225 7.38 9.59239 7.69489 9.45073 8.10957C9.15446 8.93378 8.97134 9.74336 8.93506 10.3929V10.423C8.93765 10.6347 9.01107 10.8085 9.17519 10.9866C9.38595 11.2128 9.72368 11.5501 10.0502 11.8761L10.0511 11.8753Z"
                  fill="white"
                />
                <path
                  d="M19.3781 14.4555C19.1846 16.6837 19.0024 18.7675 18.8987 19.7698C18.8927 19.8248 18.9099 19.8782 18.9471 19.9186C18.9834 19.9591 19.036 19.9823 19.0905 19.9823C19.1242 19.9823 19.1578 19.9728 19.1881 19.9556C20.0993 19.4299 21.1454 18.7976 22.0679 18.2401L22.3201 18.0878L22.4169 18.0276L22.9239 17.7213C23.3851 17.4426 23.836 17.1707 24.2671 16.9152C25.1516 16.4101 25.4366 16.072 25.9721 15.3037C26.1898 14.9992 26.7945 14.1483 27.1892 13.5934L27.5503 13.0858C27.6893 12.8871 27.8431 12.6728 27.9986 12.456L28.0219 12.4199C28.3682 11.9372 28.7578 11.3901 29.0195 10.9874C29.2553 10.6424 29.2519 10.4764 29.004 10.1813C28.5367 9.61259 27.6323 8.46146 26.6744 7.24235L26.4282 6.92919C24.7015 4.73016 22.5525 1.99342 21.0668 0.21337C21.0296 0.168632 20.9752 0.142822 20.9173 0.142822C20.8189 0.142822 20.736 0.215952 20.7239 0.31317C20.3006 3.85347 19.7495 10.1907 19.3841 14.384L19.3781 14.4563V14.4555Z"
                  fill="white"
                />
                <path
                  d="M17.7214 20.5355C17.7387 20.4727 17.7222 20.4073 17.6773 20.36C16.3981 19.0153 14.7327 17.3582 13.1218 15.7563L13.0579 15.6943C11.973 14.6163 10.8509 13.5013 9.92151 12.5507C9.5285 12.1592 9.16657 11.797 8.8513 11.4769L8.61722 11.2421C8.21297 10.836 7.90288 10.5245 7.70334 10.3327C7.66879 10.2991 7.62301 10.2802 7.57464 10.2802C7.50554 10.2802 7.44249 10.3189 7.41053 10.38C7.23691 10.7112 6.95618 11.2748 6.7316 11.729L6.42151 12.3519C6.26775 12.6608 6.10191 12.9929 5.92484 13.3439L3.32229 18.5498C2.17088 20.8521 0.974556 23.2464 0.0192233 25.1719C-0.0092812 25.2295 -0.00582624 25.2957 0.0278609 25.3499C0.0624118 25.405 0.122012 25.4377 0.186795 25.4377C0.204071 25.4377 0.220482 25.4351 0.237758 25.4308L17.5927 20.6645C17.6575 20.6465 17.7058 20.5983 17.724 20.5346L17.7214 20.5355Z"
                  fill="white"
                />
                <path
                  d="M26.9837 14.8366C26.9379 14.902 26.9318 14.982 26.9681 15.0517C27.0044 15.1214 27.0778 15.1661 27.1538 15.1661C27.191 15.1661 27.2281 15.1558 27.2618 15.136C27.8733 14.7721 29.0446 14.0674 30.0095 13.4308C30.5035 13.0944 30.2401 12.5059 29.9853 11.9381L29.9645 11.8916C29.879 11.7101 29.8013 11.5638 29.7339 11.4589C29.695 11.3978 29.6285 11.3617 29.556 11.3617C29.4929 11.3617 29.4342 11.3901 29.3944 11.4382C29.2718 11.5879 29.112 11.8133 29.023 11.9407L26.9837 14.8366Z"
                  fill="white"
                />
                <path
                  d="M23.8127 25.9152L23.7004 25.8197C21.5185 23.9467 19.4584 22.1779 18.6525 21.4534C18.6007 21.4061 18.5558 21.3691 18.504 21.345L18.4323 21.3115L18.3874 21.3769C18.3701 21.4027 18.3485 21.438 18.3243 21.4861C18.1222 21.8845 17.711 22.8894 17.5003 23.6181C17.1625 24.6969 17.7568 25.8463 18.3865 26.834L18.4064 26.8607C18.567 27.0835 18.7881 27.2057 19.0931 27.3304C19.4325 27.4724 19.918 27.6729 20.526 27.9232L26.4412 30.3614C27.2315 30.6832 28.0547 31.0247 28.7198 31.3018L28.9712 31.4059C29.4255 31.5943 29.8669 31.7784 30.2979 31.9556C30.3195 31.9642 30.3411 31.9685 30.3636 31.9685C30.4318 31.9685 30.4948 31.9247 30.5199 31.8593C30.5449 31.7947 30.5268 31.7225 30.4741 31.676C28.8442 30.2375 26.1708 27.9421 23.8118 25.9169L23.8127 25.9152Z"
                  fill="white"
                />
                <path
                  d="M32.6595 30.438C32.4245 28.7362 32.0756 26.1113 31.7681 23.7953L31.7534 23.686C31.2178 19.6605 30.6642 15.4982 30.4266 13.9229L30.4076 13.7947L30.2573 13.8721C29.9343 14.0597 29.3115 14.44 28.5902 14.8805C28.1212 15.167 27.5891 15.4913 27.0173 15.838C24.9995 17.064 22.3832 18.6591 20.3041 19.9264L19.0568 20.6921C18.9955 20.7291 18.9566 20.7919 18.9505 20.8624C18.9436 20.9321 18.9704 20.9992 19.0222 21.0465C19.2779 21.2762 19.6847 21.6307 20.1728 22.0548L20.2056 22.0832C20.6297 22.4515 21.1264 22.8842 21.6723 23.3634L32.2708 32.6147C32.2967 32.637 32.3278 32.6482 32.3615 32.6482C32.4228 32.6482 32.4763 32.6095 32.4954 32.5501C32.6742 31.9815 32.7294 31.2751 32.6603 30.438H32.6595Z"
                  fill="white"
                />
                <path
                  d="M17.0684 25.4274L16.9708 25.2278L16.8965 25.4368C16.868 25.5177 16.8326 25.6183 16.8128 25.6493L16.8067 25.6596L16.8033 25.6708C16.7687 25.7801 16.716 25.9031 16.6573 26.0391C16.621 26.1234 16.5649 26.2524 16.5243 26.3651C16.5044 26.4202 16.5087 26.4813 16.5355 26.5329C16.5631 26.5845 16.6115 26.6224 16.6685 26.637C16.8007 26.6705 16.9631 26.6989 17.071 26.717C17.1876 26.7368 17.3319 26.7609 17.4278 26.7884C17.4753 26.7944 17.5219 26.803 17.5668 26.8125L17.7491 26.8504L17.6705 26.6826C17.5046 26.329 17.2542 25.805 17.0684 25.4256V25.4274Z"
                  fill="white"
                />
                <path
                  d="M17.6592 22.0849C17.7128 21.9438 17.7819 21.7623 17.8424 21.5945C17.8657 21.5292 17.8562 21.4603 17.8165 21.4044C17.7776 21.3493 17.7137 21.3158 17.6472 21.3158C17.6273 21.3158 17.6083 21.3184 17.5893 21.3235C16.6875 21.5782 14.9634 22.0514 12.9534 22.6029L12.2538 22.7947C9.13726 23.6499 5.25892 24.715 2.45771 25.4979C2.35665 25.5263 2.29446 25.6184 2.30655 25.7216C2.31864 25.8257 2.39984 25.9014 2.50435 25.9066C5.32975 26.0451 9.0077 26.2 11.6932 26.3118L11.929 26.3213C13.6833 26.3944 14.972 26.4486 15.5758 26.4787H15.5827C15.9593 26.4787 16.025 26.3058 16.2029 25.8438C16.2487 25.7242 16.3014 25.5891 16.361 25.4592C16.646 24.7236 17.0874 23.5751 17.4364 22.6648L17.6601 22.0832L17.6592 22.0849Z"
                  fill="white"
                />

                <path
                  d="M125.433 23.9017V13.1103H128.271V14.4928C128.818 13.6674 129.892 12.8627 131.392 12.8627C133.581 12.8627 135 14.4928 135 16.845V23.9017H132.162V17.5259C132.162 16.2054 131.554 15.2975 130.298 15.2975C129.203 15.2975 128.271 16.1022 128.271 17.5878V23.9017H125.433Z"
                  fill="white"
                />
                <path
                  d="M120.281 11.509V8.59433H123.372V11.509H120.281ZM123.372 12.9349V23.9017H120.303V12.9349H123.372Z"
                  fill="white"
                />
                <path
                  d="M114.338 17.0754C114.961 16.9936 115.294 16.7278 115.294 16.1756C115.294 15.4803 114.712 14.9895 113.612 14.9895C112.449 14.9895 111.806 15.5621 111.681 16.4006H108.858C109.065 14.4987 110.747 12.8627 113.653 12.8627C116.726 12.8627 118.096 14.4169 118.096 16.8505V21.6358C118.096 22.3516 118.138 23.0469 118.221 23.8035H115.48C115.397 23.415 115.356 23.006 115.335 22.5765C114.754 23.4559 113.612 24.0489 112.138 24.0489C110.062 24.0489 108.359 22.8015 108.359 20.7769C108.359 18.5069 110.207 17.648 112.408 17.3413L114.338 17.0754ZM111.1 20.6133C111.1 21.4722 111.785 21.963 112.781 21.963C114.152 21.963 115.294 21.1655 115.294 19.6522V18.8137L112.989 19.1613C111.909 19.325 111.1 19.6726 111.1 20.6133Z"
                  fill="white"
                />
                <path
                  d="M97.0259 23.9017V8.59433H99.9073V14.3398C100.463 13.5011 101.554 12.6833 103.077 12.6833C105.3 12.6833 106.74 14.3398 106.74 16.7303V23.9017H103.859V17.4223C103.859 16.0803 103.241 15.1576 101.965 15.1576C100.854 15.1576 99.9073 15.9754 99.9073 17.4852V23.9017H97.0259Z"
                  fill="white"
                />
                <path
                  d="M82.1601 16.3952C82.1601 11.7809 85.1605 8.59433 89.1407 8.59433C92.6514 8.59433 94.8966 10.6428 95.4069 13.6846H92.3452C91.937 12.2154 90.9369 11.305 89.1203 11.305C86.6709 11.305 85.2013 13.457 85.2013 16.3952C85.2013 19.3335 86.6709 21.4855 89.1203 21.4855C90.9369 21.4855 91.937 20.575 92.3452 19.1059H95.4069C94.8966 22.1476 92.6514 24.1961 89.1407 24.1961C85.1605 24.1961 82.1601 21.0095 82.1601 16.3952Z"
                  fill="white"
                />
                <path
                  d="M76.7167 17.2226C77.3302 17.1408 77.6574 16.875 77.6574 16.3228C77.6574 15.6275 77.0848 15.1367 76.0009 15.1367C74.8556 15.1367 74.2216 15.7093 74.0989 16.5478H71.3175C71.5221 14.6459 73.1786 13.0099 76.0418 13.0099C79.0685 13.0099 80.4183 14.5641 80.4183 16.9977V21.783C80.4183 22.4987 80.4592 23.194 80.541 23.9507H77.8415C77.7597 23.5621 77.7188 23.1531 77.6983 22.7237C77.1257 23.603 76.0009 24.1961 74.5488 24.1961C72.5037 24.1961 70.8267 22.9486 70.8267 20.9241C70.8267 18.6541 72.6469 17.7952 74.8147 17.4885L76.7167 17.2226ZM73.5263 20.7605C73.5263 21.6194 74.2012 22.1102 75.1828 22.1102C76.5326 22.1102 77.6574 21.3126 77.6574 19.7993V18.9609L75.3873 19.3085C74.3239 19.4721 73.5263 19.8198 73.5263 20.7605Z"
                  fill="white"
                />
                <path
                  d="M69.7964 13.0099V15.969H69.137C67.3855 15.969 66.5406 16.9134 66.5406 18.4874V24.0489H63.6146V13.0729H66.5406V14.8358C67.0352 13.7864 68.1067 13.0099 69.4873 13.0099H69.7964Z"
                  fill="white"
                />
                <path
                  d="M61.9955 13.0099V23.9452H59.1715V22.5443C58.6269 23.3807 57.6184 24.1961 56.166 24.1961C53.9674 24.1961 52.5756 22.5443 52.5756 20.1607V13.0099H55.3995V19.4916C55.3995 20.8089 55.9643 21.7498 57.1948 21.7498C58.2638 21.7498 59.1715 20.9343 59.1715 19.408V13.0099H61.9955Z"
                  fill="white"
                />
                <path
                  d="M42.4114 8.74152H45.7928L51.5453 24.0489H48.4113L47.0711 20.3793H41.0712L39.731 24.0489H36.6794L42.4114 8.74152ZM44.0608 12.1595L42.0196 17.7792H46.1227L44.0608 12.1595Z"
                  fill="white"
                />
              </svg>
            </span>
          )}
        </Link>
      </SidebarHeader>

      <SidebarContent>
        {/* Menu Label */}
        <SidebarGroup>
          {state === 'expanded' && (
            <SidebarGroupLabel className="text-brand-50 text-xs font-regular mb-4">Menu</SidebarGroupLabel>
          )}
          <SidebarGroupContent>
            <SidebarMenu className="space-y-1">
              {navItems.map((item) => {
                const isActive = pathname === item.href
                const Icon = item.icon
                return (
                  <SidebarMenuItem key={item.href}>
                    <SidebarMenuButton
                      asChild
                      isActive={isActive}
                      tooltip={state === 'collapsed' ? item.label : undefined}
                      className={`
                        ${isActive ? 'bg-brand-50 text-brand-500 hover:bg-brand-200 font-medium' : 'text-brand-50 hover:bg-brand-500'}
                        rounded-full h-12 transition-all duration-200
                        ${state === 'collapsed' ? 'w-12 justify-center' : ''}
                      `}
                    >
                      <Link href={item.href} className="flex items-center gap-3 w-full">
                        <Icon className={state === 'collapsed' ? 'w-5 h-5' : 'w-5 h-5'} />
                        {state === 'expanded' && <span className="font-medium text-brand-500">{item.label}</span>}
                      </Link>
                    </SidebarMenuButton>
                  </SidebarMenuItem>
                )
              })}
            </SidebarMenu>
          </SidebarGroupContent>
        </SidebarGroup>

        {/* Separator */}
        <SidebarSeparator className="border-brand-500 rounded-sm max-w-88/100 mx-auto" />

        {/* Footer Items */}
        <SidebarGroup>
          <SidebarGroupContent>
            <SidebarMenu className="space-y-1">
              {footerItems.map((item) => {
                const Icon = item.icon
                return (
                  <SidebarMenuItem key={item.href}>
                    <SidebarMenuButton
                      asChild
                      tooltip={state === 'collapsed' ? item.label : undefined}
                      className={`
                        text-brand-50 hover:bg-brand-400/30
                        rounded-full h-12 transition-all duration-200
                        ${state === 'collapsed' ? 'w-12 justify-center' : ''}
                      `}
                    >
                      <Link href={item.href} className="flex items-center gap-3 w-full">
                        <Icon className="w-5 h-5" />
                        {state === 'expanded' && <span className="font-medium">{item.label}</span>}
                      </Link>
                    </SidebarMenuButton>
                  </SidebarMenuItem>
                )
              })}
            </SidebarMenu>
          </SidebarGroupContent>
        </SidebarGroup>
      </SidebarContent>

      {/* Footer with Sign Out */}
      <SidebarFooter>
        <SidebarMenu>
          <SidebarMenuItem>
            <SidebarMenuButton
              onClick={handleLogout}
              tooltip={state === 'collapsed' ? 'Sign out' : undefined}
              className={`
                text-brand-50 hover:bg-brand-400/30
                rounded-full h-12 transition-all duration-200
                ${state === 'collapsed' ? 'w-12 justify-center' : ''}
              `}
            >
              <LogOut className="w-5 h-5" />
              {state === 'expanded' && <span className="font-medium">Sign out</span>}
            </SidebarMenuButton>
          </SidebarMenuItem>
        </SidebarMenu>

        {/* Toggle Button */}
        <button
          onClick={toggleSidebar}
          className={`
            flex items-center justify-center h-12
            bg-brand-50 hover:bg-brand-200
            text-brand-500 rounded-full
            transition-all duration-200
            ${state === 'collapsed' ? 'w-12 mx-auto' : 'w-full'}
          `}
        >
          {state === 'expanded' ? <ChevronLeft className="w-5 h-5" /> : <ChevronRight className="w-5 h-5" />}
        </button>
      </SidebarFooter>
    </Sidebar>
  )
}
